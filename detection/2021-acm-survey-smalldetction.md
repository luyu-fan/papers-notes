## 综述：深度领域适应及小目标检测

### 核心方法

1. 多尺度特征学习
2. 数据增强
3. 训练粗略
4. 上下文检测
5. 基于GAN的方法

### 小目标检测的一般性问题

1. 各个特征独立层内部的信息匮乏。（下采样和池化导致)。解决方法: 多层特征融合。

   > 自底向上：将底层的特征加到比较高的层级上去。

   > 自顶向下：将顶层的抽象特征经过上采样，和低层的高分辨率图像进行融合。

2. 小对象自身的语义信息的匮乏。解决方法： 将语义信息的学习和检测过程融合起来。

   在整个检测过程中，全局语义信息可以看作是整幅图像的统计信息，而局部图像级别代表的是对象环境区域的上下文信息。上下文特征可以被分为：

   > 局部像素语义信息：主要指的是包围在整个对象周围的像素。包括边缘，颜色，纹理和其它的。检测窗口可增大以收集更多的像素信息。

   > 语义上下文信息：指的是对这个对象识别的一个似然。主要有事件、类别等比较高级和抽象的语义信息。

   > 空间语义信息：对象的空间位置，对象位置的似然概率、相对于其它对象的距离。比如各个关键点等。

   一般都会用通过调整卷积核的大小，深层特征的上采样，以及采用RNN进行特征抽取等。

3. 小对象类别的不平衡问题。核心解决方法：正负样本的重新采样。

   1. 类别之间的不平衡。使用软权重样本重分配采样，或者是复杂采样方法，直接选择一个合适的集合。
      1. 随机采样：一般用来选择产生不同尺寸比例的样本。
      2. 问题采样：将那些比较小的比较有困难的样本多次采样训练。
         1. 利用样本上的损失情况，在下一轮重新选择这个比较困难的样本用于训练。
         2. 利用IoU平衡的方法进行训练。
      3. 硬采样：根据样本之间的重要程度进行采样。
   2. 正负样本之间的不平衡。
      1. 对于不平衡的类别，可以通过合适的损失函数来调整前后景之间的权重。AP loss通过一个平均精度损失来平衡样本，DR loss通过比较前景样本的分布和背景样本之间分布 的区别来调整样本之间的权重。

4. 小对象样本对于小对象检测

   1. 小目标检测本身就会存在很多问题，比如需要比较小的锚框来匹配，生成锚框的时间会很长，在计算正样本时需要更高的IOU，能够和GT进行匹配的正样本会更少。(这样暗示了锚框类方法不太适用于小目标检测)。 核心方法：基于锚框的方法可以采用生成或者匹配更小的锚框。
      1. 采用多尺度机制。生成不同尺度的锚框分别用于不同的层，分别对应tiny, medium, 和large尺寸级别的对象。
      2. 使得anchors的尺度和比例能够适应性调整来使得更多的锚框能够匹配上比较小的gt。
      3. 允许anchors能够覆盖gt从而产生更多的锚框。

### 目标检测一般方法

#### 解决tiny detection的通用方法

##### 基于人脸检测的方法

主要适用于人脸检测。

1. 多尺度特征融合，采用skip连接，连接lower, intermediate和higher的特征。通常的方法是将多个level的特征给融合起来。这是一种最直接最常用的方法，即将不同分辨率的特征通过各种方法给叠加在一起。
2. 添加语义信息。采用更大的卷积核大小来捕获更多的语义信息。本质上是对特征进行多次处理。
3. **修正前后景之间的比例**。这个是在检测领域最重要的一种方法，平衡性是最重要的。
   1. 锚框过滤。
   2. 采样。将负样本与正样本之间的比例限定在合理的比例之间比如3：1. 或者通过等概率挑选比较大的或者小的锚框。或者采用max-in-out机制。
   3. 多尺度上的训练，将图像放缩到不同的尺寸上，然后使用不同的卷积分支去识别不同尺寸的脸。这个也是一般的检测方法会用到的，即多尺寸特征。

##### 通用的针对小目标检测的深度学习方法

1. 特征图增强。本质上就是将各个level的特征给融合起来。这里面可以采用auto-encoder结构。建立图像特征金字塔，对于每个level的图像，将他们的特征全给加起来，从而获得比较好的局部空间信息。

2. 融合上下文信息。

   局部交互和语义信息。**较大的bbox会提供更多的局部交互信息**。一般会采用1.5倍大小用于提供更多的局部细节。

   一般都会采用转置卷积用于获取比较高的分辨率。甚至采用RNN在RPN内捕获对象的语义信息。

   分为自底向上和自顶向下两种方式。自底向上即为将所有的low level features向上传播，然后经过采样之后和high level的特征融合起来。自顶向下则是将高level的特征经过上采样和low level的特征融合起来。??? 这里不就是特征图融合和增强哪里做的???

3. 小对象的前后景类别平衡。

   1. 采样，获得更多的小对象样本用于训练。针对对象类别不平衡的数据集而言。
   2. 平衡前后景的样本或者损失。这个尤其是在基于锚框的机制当中比较重要。
   3. 对于那些比较严重的负样本更多的权重???

4. 增加小目标样本的采样次数。

   1. 采用多尺度，人为创建小样本。最常用的一种方法。

##### 航拍图像的检测方法

航拍领域的小目标检测会有四种大的类型：模板匹配，基于知识，机器学习方法。

1. 目标旋转的处理。提出了一种新的旋转卷积层，可以混搭在一般的卷积层当中使用。特征细化技术，将bounding box的信息也添加到相关的特征点当中，使用特征插值和对齐来提升特征重建和对齐。
2. 使用多level特征融合信息。
3. 同样使用前后景比例修正。
4. 增加训练实例的数目。通过各种方法来增强鲁棒性的方法。

##### 实例分隔的检测方法

将实例分隔的方法引入到目标检测当中，即每一个像素都会有一个标签。核心是定位和上下文信息的平衡，然后就是感受野大小和定位精度的平衡。

考虑：U-NET和Hourglasses网络。

#### 深度领域适应的目标检测方法 （迁移学习又套了个壳子?)

##### 基于差异性的深度领域适应

使用带有噪音的标签进行训练。即通过从另外一个domain上的得到标签进行训练。

##### 基于对抗的深度特征适应

使用对抗网络完成source domain和target domain之间分布的一个混合性。

##### 基于重建的深度领域适应

通过重建的方法完成domain之间的适应。

##### 混杂适应及其它

略。

#### 针对小目标的检测的方法和趋势

#####  小目标的定义

coco中一般将32 * 32大小的定义为小目标，实际上比例没有超过某个比例大小的都是小目标。

1. 多尺度特征学习
   1. 图像金字塔：每种尺度的图像会对应一个专门的检测器。
   2. 比较浅层的具备有更多空间信息的特征会增强小对象的检测能力。
   3. 图像金字塔 --> single feature map --> 层级特征 ---> 集成特征 --> 特征金字塔 FPN --> 特征融合金字塔生成 --> 多尺度融合。
2. 数据增强
   1. 一般的数据增强，或者马赛克增强机制。
3. 训练策略
   1. 使用对象规范化机制来解决。
4. 基于语义的检测
   1. 重新考虑对象上下文的重要性。主要是对象与全局上下文之间的关系。
5. 基于GAN的检测
   1. 此类方法的核心是通过生成比较高分辨率环境下的特征表示，来提升小目标检测的高效性，同时降低小对象和一般对象之间特征表示的鸿沟。

#### 小目标检测的挑战和深度域适应

略

### 目标检测的架构趋势

###### CNN结构的一个总结：除了标准卷积之外常用的卷积模式

1. 1*1卷积： 降维
2. 3-d卷积
3. Active Convolution 激活卷积
4. Attention-Augmented Convolution AAC 带有自注意力头的卷积层
5. Conditional Convolution CondConv 条件卷积
6. Coordinate Convolution 带有坐标的卷积操作
7. Deformable Convolution DC 可形变卷积 比较常用的一种新的卷积模式
8. Deformable Kernel 可卷积核

###### backbone的常见结构

1. resnet
2. alexnet
3. vgg
4. densenet
5. mobilenet
6. googlenet
7. resnetXt
8. Xception
9. Darknet-53
10. SqueezeNet

这篇论文的其它部分和另一篇综述几乎相同，忽略。



























































